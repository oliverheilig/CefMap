<html>
<head>
    <meta charset='utf-8' />
    <title></title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    <script src='https://unpkg.com/maplibre-gl@1.14.0-rc.1/dist/maplibre-gl.js'></script>
    <link href='https://unpkg.com/maplibre-gl@1.14.0-rc.1/dist/maplibre-gl.css' rel='stylesheet' />
    <style>
        body { margin:0; padding:0; }
        #map { position:absolute; top:0; bottom:0; width:100%; }
    </style>
</head>
<body>

<div id='map'></div>
<script>

    // This is my personal api key. Please get your own free key at https://developer.myptv.com/
    const apiKey = 'YjA2OGIzOGMxMjdiNGZkOGIwYTMwNmI0OGE4Y2ZiMTc6Y2QwZjUyMDYtMTk2Ni00N2NlLWFmNTYtNzBjOWZjZTgxNzJh';

    const map = new maplibregl.Map({
        container: 'map', // container id
        attributionControl: true,
        customAttribution: '&copy; 2021 PTV AG, HERE',
        pitch: 0,
        antialias: true,
        hash: true,
        style: 'https://vectormaps-resources.myptv.com/styles/1_1_0/monochrome.json',
        transformRequest: (url, resourceType) => {
            if (resourceType === 'Tile' && url.startsWith('https://api.myptv.com')) {
                return {
                    url: url + '?apiKey=' + apiKey
                }
            }
        },
        zoom: 0 // starting zoom
    });

    // Add controls to the map.
    map.addControl(new maplibregl.NavigationControl());
    
    function setMarker(latitude, longitude, zoom, pitch, duration) {
        const mapLocation = [latitude, longitude];

        // fly to location
        map.flyTo({
            center: [latitude, longitude],
            pitch: pitch,
            bearing: 0,
            duration: duration,
            zoom: zoom
        });

        // Add a marker with popup
        const marker = new maplibregl.Marker()
            .setLngLat(mapLocation)
            .addTo(map);

        const popup = new maplibregl.Popup({ offset: 25 })
            .setLngLat(mapLocation)
            .setHTML("<b>Hello world!</b><br />I am a popup.")
            .addTo(map);

        marker.setPopup(popup);
    };

</script>

</body>
</html>
